<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>获取所有API</title>
</head>

<body>
    <script>
        let names = Object.getOwnPropertyNames(window);
        console.log(names);

        // JavaScript 标准规定的属性
        let js = new Set();
        let objects = ["BigInt", "BigInt64Array", "BigUint64Array", "Infinity", "NaN", "undefined", "eval", "isFinite",
            "isNaN", "parseFloat", "parseInt", "decodeURI", "decodeURIComponent", "encodeURI", "encodeURIComponent",
            "Array", "Date", "RegExp", "Promise", "Proxy", "Map", "WeakMap", "Set", "WeakSet", "Function",
            "Boolean", "String", "Number", "Symbol", "Object", "Error", "EvalError", "RangeError", "ReferenceError",
            "SyntaxError", "TypeError", "URIError", "ArrayBuffer", "SharedArrayBuffer", "DataView", "Float32Array",
            "Float64Array", "Int8Array", "Int16Array", "Int32Array", "Uint8Array", "Uint16Array", "Uint32Array",
            "Uint8ClampedArray", "Atomics", "JSON", "Math", "Reflect", "escape", "unescape"
        ];
        objects.forEach(o => js.add(o));
        names = names.filter(e => !js.has(e));
        console.log(names);

        // 所有 Node 的子类
        names = names.filter(e => {
            try {
                return !(window[e].prototype instanceof Node)
            } catch (err) {
                return true;
            }
        }).filter(e => e != "Node")
        console.log(names);

        // window对象属性（参考：https://html.spec.whatwg.org/#window）
        let windowprops = new Set();
        objects = ["window", "self", "document", "name", "location", "history", "customElements", "locationbar",
            "menubar", " personalbar", "scrollbars", "statusbar", "toolbar", "status", "close", "closed", "stop",
            "focus", " blur", "frames", "length", "top", "opener", "parent", "frameElement", "open", "navigator",
            "applicationCache", "alert", "confirm", "prompt", "print", "postMessage", "console"
        ];
        objects.forEach(o => windowprops.add(o));
        names = names.filter(e => !windowprops.has(e));
        console.log(names);

        // 过滤掉所有的事件
        names = names.filter(e => !e.match(/^on/));
        console.log(names);

        // webkit前缀的私有属性
        names = names.filter(e => !e.match(/^webkit/));
        console.log(names);

        //  HTML 标准中还能找到所有的接口
        let interfaces = new Set();
        objects = ["ApplicationCache", "AudioTrack", "AudioTrackList", "BarProp", "BeforeUnloadEvent",
            "BroadcastChannel", "CanvasGradient", "CanvasPattern", "CanvasRenderingContext2D", "CloseEvent",
            "CustomElementRegistry", "DOMStringList", "DOMStringMap", "DataTransfer", "DataTransferItem",
            "DataTransferItemList", "DedicatedWorkerGlobalScope", "Document", "DragEvent", "ErrorEvent",
            "EventSource", "External", "FormDataEvent", "HTMLAllCollection", "HashChangeEvent", "History",
            "ImageBitmap", "ImageBitmapRenderingContext", "ImageData", "Location", "MediaError", "MessageChannel",
            "MessageEvent", "MessagePort", "MimeType", "MimeTypeArray", "Navigator", "OffscreenCanvas",
            "OffscreenCanvasRenderingContext2D", "PageTransitionEvent", "Path2D", "Plugin", "PluginArray",
            "PopStateEvent", "PromiseRejectionEvent", "RadioNodeList", "SharedWorker", "SharedWorkerGlobalScope",
            "Storage", "StorageEvent", "TextMetrics", "TextTrack", "TextTrackCue", "TextTrackCueList",
            "TextTrackList", "TimeRanges", "TrackEvent", "ValidityState", "VideoTrack", "VideoTrackList",
            "WebSocket", "Window", "Worker", "WorkerGlobalScope", "WorkerLocation", "WorkerNavigator"
        ];
        objects.forEach(o => interfaces.add(o));
        names = names.filter(e => !interfaces.has(e));
        console.log(names);

        // http://www.ecma-international.org/ecma-402/5.0/index.html#Title
        names = names.filter(e => e != "Intl")
        console.log(names);

        // https://streams.spec.whatwg.org/#blqs-class
        let StreamApi = new Set();
        ["ReadableStream", "ReadableStreamDefaultReader", "ReadableStreamBYOBReader",
            "ReadableStreamDefaultController", "ReadableByteStreamController", "ReadableStreamBYOBRequest",
            "WritableStream", "WritableStreamDefaultWriter", "WritableStreamDefaultController",
            "TransformStream", "TransformStreamDefaultController", "ByteLengthQueuingStrategy",
            "CountQueuingStrategy"
        ].forEach(e => StreamApi.add(e));
        names = names.filter(s => !StreamApi.has(s))
        console.log(names);

        // https://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15
        let WebGlApi = new Set();

        ["WebGLContextEvent", "WebGLObject", "WebGLBuffer", "WebGLFramebuffer", "WebGLProgram",
            "WebGLRenderbuffer", "WebGLShader", "WebGLTexture", "WebGLUniformLocation", "WebGLActiveInfo",
            "WebGLShaderPrecisionFormat", "WebGLRenderingContext"
        ].forEach(e => WebGlApi.add(e));
        names = names.filter(s => !WebGlApi.has(s))
        console.log(names);

        // Web Audio API https://www.w3.org/TR/webaudio/
        let AudioApi = new Set();
        ["AudioContext", "AudioNode", "AnalyserNode", "AudioBuffer", "AudioBufferSourceNode", "AudioDestinationNode",
            "AudioParam", "AudioListener", "AudioWorklet", "AudioWorkletGlobalScope", "AudioWorkletNode",
            "AudioWorkletProcessor", "BiquadFilterNode", "ChannelMergerNode", "ChannelSplitterNode",
            "ConstantSourceNode", "ConvolverNode", "DelayNode", "DynamicsCompressorNode", "GainNode", "IIRFilterNode",
            "MediaElementAudioSourceNode", "MediaStreamAudioSourceNode", "MediaStreamTrackAudioSourceNode",
            "MediaStreamAudioDestinationNode", "PannerNode", "PeriodicWave", "OscillatorNode", "StereoPannerNode",
            "WaveSha.perNode", "ScriptProcessorNode", "AudioProcessingEvent"
        ].forEach(e => AudioApi.add(e));
        names = names.filter(s => !AudioApi.has(s))
        console.log(names);

        // https://encoding.spec.whatwg.org/#dom-textencoder
        let EncodeingApi = new Set();
        ["TextDecoder", "TextEncoder", "TextDecoderStream", "TextEncoderStream"].forEach(e => EncodeingApi.add(e));
        names = names.filter(s => !EncodeingApi.has(s))
        console.log(names);
    </script>
</body>

</html>